(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d335f"],{"5c94":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("管理员选项")]),a("el-breadcrumb-item",[e._v("查看管理员")])],1),a("el-divider"),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"查看管理员",name:"show"}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"输入管理员姓名"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("el-form-item",[a("el-button",{attrs:{circle:"",type:"primary",icon:"el-icon-search"},on:{click:e.serch}})],1)],1),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"id",prop:"id"}}),a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),a("el-table-column",{attrs:{label:"状态",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.state?a("div",[e._v("白名单")]):e._e(),2===t.row.state?a("div",[e._v("黑名单")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"上次登陆的时间",prop:"last_login_time"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.del(t.row.id)}}},[e._v("删除")]),1===t.row.state?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.move(t.row.id,2)}}},[e._v("加入黑名单")]):a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.move(t.row.id,1)}}},[e._v("移出黑名单")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"30px"},attrs:{background:"",layout:"prev, pager, next","current-page":e.page,"page-size":e.pageSize,total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"current-change":e.handleClick}})],1),a("el-tab-pane",{attrs:{label:"添加管理员",name:"add"}},[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"addForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"请输入新的管理员名称",prop:"username"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")])],1)],1)],1)],1)],1)],1)},r=[],o={name:"ManagerShow",data:function(){return{activeName:"add",tableData:[],total:0,page:1,pageSize:5,value:"",form:{username:""},rules:{username:{required:!0,message:"请输入管理员名称",trigger:"blur"}}}},methods:{fetchData:function(){var e=this;this.$axios.get(this.$api.MANAGER,{role:2,page:this.page,pageSize:this.pageSize,search:this.value}).then(function(t){200===t.data.code&&(e.tableData=t.data.data,e.total=t.data.total)})},handleClick:function(){this.fetchData()},serch:function(){this.page=1,this.fetchData()},del:function(e){var t=this;this.$confirm("此操作将永久删除该管理员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.delete(t.$api.MANAGER,{id:e}).then(function(e){console.log(e),200===e.data.code&&(t.$message.success("删除成功"),t.page=1,t.fetchData())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},move:function(e,t){var a=this;this.$axios.put(this.$api.MANAGER,{id:e,state:t}).then(function(e){200===e.data.code&&(a.$message.success("修改成功"),a.page=1,a.fetchData())})},add:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;e.$axios.post(e.$api.MANAGER,e.form).then(function(t){200===t.data.code&&(e.$message.success("添加成功"),e.activeName="show",e.page=1,e.fetchData(),e.$refs.addForm.resetFields())})})}},mounted:function(){this.fetchData()}},l=o,i=a("2877"),s=Object(i["a"])(l,n,r,!1,null,"77c3b308",null);t["default"]=s.exports}}]);
//# sourceMappingURL=chunk-2d0d335f.f5064be3.js.map